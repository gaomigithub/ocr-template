[{"C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\index.js":"1","C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\detector-subpages-container.jsx":"2","C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\outputboxForTable.jsx":"3","C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\outputbox.jsx":"4","C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\uploadbox.js":"5","C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\imgTranscoding.js":"6","C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\ApiIp.js":"7","C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\App.js":"8","C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\reportWebVitals.js":"9","C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\imgReviewCanvas.js":"10","C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\hoverText.js":"11"},{"size":500,"mtime":1606701656496,"results":"12","hashOfConfig":"13"},{"size":2989,"mtime":1610693776752,"results":"14","hashOfConfig":"13"},{"size":5451,"mtime":1610695014643,"results":"15","hashOfConfig":"13"},{"size":1104,"mtime":1606704877809,"results":"16","hashOfConfig":"13"},{"size":5576,"mtime":1610695068132,"results":"17","hashOfConfig":"13"},{"size":1125,"mtime":1606702711229,"results":"18","hashOfConfig":"13"},{"size":86,"mtime":1606703252438,"results":"19","hashOfConfig":"13"},{"size":335,"mtime":1606706152334,"results":"20","hashOfConfig":"13"},{"size":362,"mtime":1606701656496,"results":"21","hashOfConfig":"13"},{"size":6443,"mtime":1610691378483,"results":"22","hashOfConfig":"13"},{"size":3303,"mtime":1610695168038,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"1ml7qx8",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"29","messages":"30","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"39"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\index.js",[],["51","52"],"C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\detector-subpages-container.jsx",[],"C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\outputboxForTable.jsx",["53","54","55"],"C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\outputbox.jsx",[],"C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\uploadbox.js",["56","57"],"C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\imgTranscoding.js",[],"C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\ApiIp.js",[],["58","59"],"C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\App.js",[],["60","61"],"C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\reportWebVitals.js",[],["62","63"],"C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\imgReviewCanvas.js",["64","65","66","67","68","69","70"],"import React, { useMemo, useState, useEffect } from \"react\";\r\nimport { Stage, Layer, Line } from \"react-konva\";\r\nimport lodash from \"lodash\";\r\n\r\nlet INITIAL_STATE = (props) => {\r\n  let arr = [];\r\n  if (props == undefined) {\r\n    arr = [...Array(1)].map((_, id) => ({\r\n      id: id,\r\n      location: [\r\n        [0, 0],\r\n        [10, 0],\r\n        [10, 10],\r\n        [0, 10],\r\n      ],\r\n      text: \"error case\",\r\n      x: 0,\r\n      y: 0,\r\n      isClicked: false,\r\n      isOvering: false,\r\n    }));\r\n  } else if (props.infos) {\r\n    let infos = props.infos;\r\n\r\n    // Draw ALL data detected\r\n    // let tmp2d = [...Array(infos.length)].map((_, id) => infos[id].cells);\r\n\r\n    // Draw cells only\r\n    let tmp2d = [...Array(infos.length)].map((_, id) =>\r\n      infos[id].is_table ? infos[id].cells : null\r\n    );\r\n    tmp2d = tmp2d.filter(function (n) {\r\n      return n;\r\n    });\r\n    let tmp1d = [].concat.apply([], tmp2d);\r\n    arr = [...Array(tmp1d.length)].map((_, id) => ({\r\n      id: id,\r\n      location: tmp1d[id].location,\r\n      text: tmp1d[id].text,\r\n      isClicked: false,\r\n      isOvering: false,\r\n    }));\r\n  } else {\r\n    let detectors = props.detectors;\r\n    arr = [...Array(detectors.length)].map((_, id) => ({\r\n      id: id,\r\n      location: detectors[id].location,\r\n      text: detectors[id].text,\r\n      isClicked: false,\r\n      isOvering: false,\r\n    }));\r\n  }\r\n  return arr;\r\n};\r\n\r\nconst propsData = (props) => {\r\n  let data = [];\r\n  if (props.infos != null && props.infos != undefined) {\r\n    data = props.infos;\r\n  } else {\r\n    data = props.detectors;\r\n  }\r\n  return data;\r\n};\r\n\r\nfunction deepClone(obj) {\r\n  let objClone = Array.isArray(obj) ? [] : {};\r\n  if (obj && typeof obj === \"object\") {\r\n    for (let key in obj) {\r\n      if (obj.hasOwnProperty(key)) {\r\n        //判断ojb子元素是否为对象，如果是，递归复制\r\n        if (obj[key] && typeof obj[key] === \"object\") {\r\n          objClone[key] = deepClone(obj[key]);\r\n        } else {\r\n          //如果不是，简单复制\r\n          objClone[key] = obj[key];\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return objClone;\r\n}\r\n\r\nconst ImgReviewCanvas = (props) => {\r\n  // size of the frame\r\n  const stageWidth = props.frameSize;\r\n  // Scaling based on the frame size\r\n  // var scalingRatio = stageWidth / props.imgWidth;\r\n  // var stageHeight = props.imgHeight * scalingRatio;\r\n  const imgObj = useMemo(() => props.imgObj, [props]);\r\n  const scalingRatio = stageWidth / imgObj.width;\r\n  const stageHeight = imgObj.height * scalingRatio;\r\n\r\n  // var copyOfInitailData = lodash.cloneDeep(INITIAL_STATE(props));\r\n  var copyOfInitailData = deepClone(INITIAL_STATE(props));\r\n\r\n  const initBoxs = useMemo(() => copyOfInitailData, [\r\n    props.infos,\r\n    props.detectors,\r\n  ]);\r\n\r\n  const [boxs, setState] = useState([]);\r\n  const [boolValue, setBoolValue] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setState(initBoxs);\r\n  }, []);\r\n  useEffect(() => {\r\n    setBoolValue(true);\r\n    if (boolValue) {\r\n      setState(initBoxs);\r\n    }\r\n  }, [initBoxs]);\r\n\r\n  // 向父containner(uploadbox)传递\r\n  const handleHover = (id, bool) => {\r\n    props.callback_hover(id, bool);\r\n  };\r\n\r\n  const handleMouseOver = (e) => {\r\n    const id = e.target.id();\r\n    setState(\r\n      boxs.map((box) => {\r\n        return {\r\n          ...box,\r\n          isOvering: box.id === id,\r\n        };\r\n      })\r\n    );\r\n    handleHover(id, true);\r\n  };\r\n  const handleMouseLeave = (e) => {\r\n    const id = e.target.id();\r\n    setState(\r\n      boxs.map((box) => {\r\n        return {\r\n          ...box,\r\n          isOvering: false,\r\n        };\r\n      })\r\n    );\r\n    handleHover(id, false);\r\n  };\r\n  // const handleAlert = (e) => {\r\n  //   const id = e.target.id();\r\n  //   window.alert = function (text) {\r\n  //     // customize the alert\r\n  //     var div = document.createElement(\"div\");\r\n  //     div.style.backgroundColor = \"white\";\r\n  //     div.style.color = \"black\";\r\n  //     div.style.boxShadow = \"0 0 10px #b2b2b2 \";\r\n  //     div.style.position = \" fixed\";\r\n  //     div.style.zIndex = 9999999;\r\n  //     div.style.width = \" 30%\";\r\n  //     div.style.top = \" 40%\";\r\n  //     div.style.left = \"75%\";\r\n  //     div.style.lineHeight = \" 60px\";\r\n  //     div.style.borderRadius = \" 4px\";\r\n  //     div.style.fontSize = \" 15px\";\r\n  //     div.style.textAlign = \"center\";\r\n  //     div.style.padding = \"0 20px\";\r\n  //     div.className = \"animated  bounceInDown\";\r\n  //     div.id = \"alert\";\r\n  //     div.innerHTML = text;\r\n  //     document.getElementsByTagName(\"body\")[0].appendChild(div);\r\n  //     var selfObj = document.getElementById(\"alert\");\r\n  //     // Dynamically fix the position of the alert\r\n  //     var alertWidth = window.getComputedStyle(selfObj, null).width;\r\n  //     div.style.marginLeft = -parseInt(alertWidth) / 2 + \"px\";\r\n  //     // Set the time of showing\r\n  //     setTimeout(function () {\r\n  //       document.getElementsByTagName(\"body\")[0].removeChild(div);\r\n  //     }, 5000);\r\n  //   };\r\n  //   return alert(boxs[id].text);\r\n  // };\r\n\r\n  return (\r\n    <div>\r\n      {/* draw canvas if stageWidth has value; \r\n      otherwise, error caused by NaN value*/}\r\n      {stageHeight ? (\r\n        <Stage width={stageWidth} height={stageHeight}>\r\n          <Layer>\r\n            {boxs.map((box) => (\r\n              <Line\r\n                key={box.id}\r\n                id={box.id}\r\n                points={[\r\n                  box.location[0][0] * scalingRatio,\r\n                  box.location[0][1] * scalingRatio,\r\n                  box.location[1][0] * scalingRatio,\r\n                  box.location[1][1] * scalingRatio,\r\n                  box.location[2][0] * scalingRatio,\r\n                  box.location[2][1] * scalingRatio,\r\n                  box.location[3][0] * scalingRatio,\r\n                  box.location[3][1] * scalingRatio,\r\n                ]}\r\n                closed\r\n                stroke={box.isOvering ? \"yellow\" : \"#3377ff\"}\r\n                strokeWidth={box.isOvering ? 5 : 1}\r\n                fill={box.isOvering ? \"rgba(100,149,237,0.5)\" : null}\r\n                opacity={box.isOvering ? 1 : 0.7}\r\n                // draggable\r\n                // onMouseEnter={handleAlert}\r\n                onMouseOver={handleMouseOver}\r\n                onMouseLeave={handleMouseLeave}\r\n              />\r\n            ))}\r\n          </Layer>\r\n        </Stage>\r\n      ) : (\r\n        <div />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImgReviewCanvas;\r\n","C:\\Users\\yaohai\\Documents\\GitHub\\ocr-template\\src\\IOTools\\hoverText.js",["71","72","73","74","75","76"],{"ruleId":"77","replacedBy":"78"},{"ruleId":"79","replacedBy":"80"},{"ruleId":"81","severity":1,"message":"82","line":4,"column":10,"nodeType":"83","messageId":"84","endLine":4,"endColumn":13},{"ruleId":"85","severity":1,"message":"86","line":52,"column":18,"nodeType":"87","messageId":"88","endLine":52,"endColumn":20},{"ruleId":"85","severity":1,"message":"89","line":101,"column":14,"nodeType":"87","messageId":"88","endLine":101,"endColumn":16},{"ruleId":"81","severity":1,"message":"90","line":53,"column":11,"nodeType":"83","messageId":"84","endLine":53,"endColumn":17},{"ruleId":"81","severity":1,"message":"91","line":54,"column":11,"nodeType":"83","messageId":"84","endLine":54,"endColumn":16},{"ruleId":"77","replacedBy":"92"},{"ruleId":"79","replacedBy":"93"},{"ruleId":"77","replacedBy":"94"},{"ruleId":"79","replacedBy":"95"},{"ruleId":"77","replacedBy":"96"},{"ruleId":"79","replacedBy":"97"},{"ruleId":"81","severity":1,"message":"98","line":3,"column":8,"nodeType":"83","messageId":"84","endLine":3,"endColumn":14},{"ruleId":"85","severity":1,"message":"86","line":7,"column":13,"nodeType":"87","messageId":"88","endLine":7,"endColumn":15},{"ruleId":"81","severity":1,"message":"99","line":56,"column":7,"nodeType":"83","messageId":"84","endLine":56,"endColumn":16},{"ruleId":"85","severity":1,"message":"89","line":58,"column":42,"nodeType":"87","messageId":"88","endLine":58,"endColumn":44},{"ruleId":"100","severity":1,"message":"101","line":97,"column":53,"nodeType":"102","endLine":100,"endColumn":4,"suggestions":"103"},{"ruleId":"100","severity":1,"message":"104","line":107,"column":6,"nodeType":"102","endLine":107,"endColumn":8,"suggestions":"105"},{"ruleId":"100","severity":1,"message":"106","line":113,"column":6,"nodeType":"102","endLine":113,"endColumn":16,"suggestions":"107"},{"ruleId":"100","severity":1,"message":"101","line":8,"column":53,"nodeType":"102","endLine":11,"endColumn":4,"suggestions":"108"},{"ruleId":"100","severity":1,"message":"104","line":18,"column":6,"nodeType":"102","endLine":18,"endColumn":8,"suggestions":"109"},{"ruleId":"100","severity":1,"message":"106","line":24,"column":6,"nodeType":"102","endLine":24,"endColumn":16,"suggestions":"110"},{"ruleId":"85","severity":1,"message":"86","line":27,"column":21,"nodeType":"87","messageId":"88","endLine":27,"endColumn":23},{"ruleId":"100","severity":1,"message":"111","line":46,"column":6,"nodeType":"102","endLine":46,"endColumn":19,"suggestions":"112"},{"ruleId":"85","severity":1,"message":"86","line":92,"column":13,"nodeType":"87","messageId":"88","endLine":92,"endColumn":15},"no-native-reassign",["113"],"no-negated-in-lhs",["114"],"no-unused-vars","'css' is defined but never used.","Identifier","unusedVar","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","Expected '!==' and instead saw '!='.","'height' is assigned a value but never used.","'width' is assigned a value but never used.",["113"],["114"],["113"],["114"],["113"],["114"],"'lodash' is defined but never used.","'propsData' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useMemo has a missing dependency: 'copyOfInitailData'. Either include it or remove the dependency array.","ArrayExpression",["115"],"React Hook useEffect has a missing dependency: 'initBoxs'. Either include it or remove the dependency array.",["116"],"React Hook useEffect has a missing dependency: 'boolValue'. Either include it or remove the dependency array.",["117"],["118"],["119"],["120"],"React Hook useEffect has missing dependencies: 'initBoxs' and 'props.selectedId'. Either include them or remove the dependency array. If 'setState' needs the current value of 'props.selectedId', you can also switch to useReducer instead of useState and read 'props.selectedId' in the reducer.",["121"],"no-global-assign","no-unsafe-negation",{"desc":"122","fix":"123"},{"desc":"124","fix":"125"},{"desc":"126","fix":"127"},{"desc":"122","fix":"128"},{"desc":"124","fix":"129"},{"desc":"126","fix":"130"},{"desc":"131","fix":"132"},"Update the dependencies array to be: [copyOfInitailData]",{"range":"133","text":"134"},"Update the dependencies array to be: [initBoxs]",{"range":"135","text":"136"},"Update the dependencies array to be: [boolValue, initBoxs]",{"range":"137","text":"138"},{"range":"139","text":"134"},{"range":"140","text":"136"},{"range":"141","text":"138"},"Update the dependencies array to be: [initBoxs, props.hover, props.selectedId]",{"range":"142","text":"143"},[2651,2697],"[copyOfInitailData]",[2852,2854],"[initBoxs]",[2965,2975],"[boolValue, initBoxs]",[271,317],[472,474],[585,595],[1061,1074],"[initBoxs, props.hover, props.selectedId]"]